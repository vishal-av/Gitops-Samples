apiVersion: v1
kind: Secret
metadata:
  name: shared-app-secrets
  namespace: default
  labels:
    app: shared-manifests
  annotations:
    description: "Shared secret with Harness Secret Manager - works with both GitOps and CD Pipeline"
type: Opaque
stringData:
  # ========================================
  # PROJECT-LEVEL HARNESS SECRET EXPRESSIONS
  # ========================================
  # All secrets at Project level for simplicity
  # Secrets stored in Harness Secret Manager (built-in)
  # Syntax: <+secrets.getValue("SECRET_ID")>
  
  # These work with BOTH:
  # - GitOps Application (Argo CD sync)
  # - CD Pipeline (traditional Harness deployment)
  
  # API Key
  api-key: <+secrets.getValue("apiKey")>
  
  # Database password
  db-password: <+secrets.getValue("dbPassword")>
  
  # Database username
  db-username: <+secrets.getValue("dbUsername")>
  
  # App secret
  app-secret: <+secrets.getValue("appSecret")>
